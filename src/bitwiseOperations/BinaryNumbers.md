# Представяне на числата в компютрите

## Числови системи (Numeral Systems)

__БРОЙНА СИСТЕМА__ - Начин за представяне на числата, посредством ограничен брой символи, наречени цифри и правилата за тяхното представяне.

__ОСНОВА__ - Броят на различните цифри, които се използват за представяне на числата в дадена бройна система.

__ПОЗИЦИЯ__ - Мястото, което заема цифрата в представянето на числото. Позицията също така се нарича _разряд_.

__НЕПОЗИЦИОННА БРОЙНА СИСТЕМА__ - Бройна система, при която стойността на цифрата не зависи от нейната позиция при записването на числото.

__ПОЗИЦИОННА БРОЙНА СИСТЕМА__ - Бройна система, при която стойността на цифрата се определя от нейното място в числото. За всяка позиция има асоциирана стойност, която е степен на основата на бройната система.

````
Позицията на цифрата в числото, при позиционна бройна система, започва от 0 и се увеличават от дясно на ляво.

  число: 3 6 5
 разряд: 2 1 0
 
 разряд 0 - обозначава единиците
 разряд 1 - обозначава десетиците
 разряд 2 - обозначава стотиците
 разряд 3 - обозначава хилядите
 и т.н.

````

+ Позиционни бройни сиситеми:
	+ Двоична бройна система - има 2 цифри - 0, 1;
	+ Осмична бройна система -  има 8 цифри - 0, 1, 2, 3, 4, 5, 6, 7;
	+ Десетична бройна система -  има 10 цифри - 0, 1, 2, 3, 4, 5, 6, 7, 8, 9;
	+ Дванадесетична бройна система -  има 12 цифри - 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, A, B;
	+ Шестнадесетична бройна система -  има 16 цифри - 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, A, B, C, D, E, F;

__ДВОИЧНА БРОЙНА СИСТЕМА__ - Тя има две цифри - 0 и 1. Отделните цифри се означават, като бит, а редицата от битове се нарича бинарен код. Двоичните числа (за прегледност) се изписват в групи от по 4 и 8 бита. Всяка следваща цифра след нулата, се образува чрез добавяне на единици или промяна на тяхната позиция.

> Числата в двоичната система, могат да се обозначават с долен индекс 2 или с буквата "b": 1001b = 9;

Завършващият бит в бинарното число (т.е. най-десният), се нарича най-младши разред. Първата цифра, която определя стойността на бинарното число, която заема най-лявата позиция в бинарният код, винаги е 1-ца. Тя се нарича най-старши разред.

````
Десетични числа   Бинарни числа
		          
0	              0	
1	              1	
2	              10	
3	              11	
4	              100
5	              101
6	              110
7	              111
8	              1000
9	              1001
10	              1010
11	              1011
12	              1100
13	              1101
14	              1110
15	              1111
16	              10000
17	              10001
18	              10010
19	              10011
20	              10100

````

Всяко число може да бъде разложено като: всяка цифра на числото, умножим по основата на бройната система, повдигната на степен, равна на позицията на цифрата в изходното число.

````
ПРИМЕР: 8564

  число:  8    5    6    4
позиция:  3    2    1    0
 основа: 10^3 10^2 10^1 10^0
 
 8564 = 8 * 10^3 + 5 * 10^2 + 6 * 10^1 + 4 * 10^0
 
 По този начин получаваме броя на хилядите, стотиците, десетиците и единиците. Сумирайки ги получаваме десетичното число 8564.
 
````

````
ПРИМЕР: 10 0001 0111 0100

  число:    1    0    0    0   0   1   0   1   1   1   0   1   0   0
позиция:   13   12   11   10   9   8   7   6   5   4   3   2   1   0
 основа: 2^13 2^12 2^11 2^10 2^9 2^8 2^7 2^6 2^5 2^4 2^3 2^2 2^1 2^0
 
 1*2^13 + 0*2^12 + 0*2^11 + 0*2^10 + 0*2^9 + 1*2^8 + 0*2^7 + 1*2^6 + 1*2^5 + 1*2^4 + 0*2^3 + 1*2^2 + 0*2^1 + 0*2^0 = 8192 + 256 + 64 + 32 + 16 + 4 = 8564
 
````

````
Преобразуване на двоично число в десетично число:

1110b = (1 * 2 ^ 3) + (1 * 2 ^ 2) + (1 * 2 ^ 1) + (0 * 2 ^ 0) = 8 + 4 + 2 = 14
10101b = (1 * 2 ^ 4) + (0 * 2 ^ 3) + (1 * 2 ^ 2) + (0 * 2 ^ 1) + (1 * 2 ^ 0) = 16 + 4 + 1 = 21
101001b = (1 * 2 ^ 5) + (0 * 2 ^ 4) + (1 * 2 ^ 3) + (0 * 2 ^ 2) + (0 * 2 ^ 1) + (1 * 2 ^ 0) = 32 + 8 + 1 = 41

````

````
Преобразуване на десетично число в двоично число:

Делим числото на 2 докато се получи част по-малка от две. След това съединяваме остатъците отдолу нагоре.

14 / 2 = 7   остатък (0)
7 / 2 = 3    остатък (1)
3 / 2 = 1    остатък (1)
1 / 2 = 0    остатък (1)
14 = 1110b

41 / 2 = 20   остатък (1)
20 / 2 = 10   остатък (0)
10 / 2 = 5    остатък (0)
5 / 2 = 2     остатък (1)
2 / 2 = 1     остатък (0)
1 / 2 = 0     остатък (1)
41 = 101001b

````

````
Събиране в двоичната бройна система:
0 + 0 = 0
0 + 1 = 1
1 + 0 = 1
1 + 1 = 10

Пример за събиране на две числа:
  1 0 1 0 1   = 21
+   1 1 0 0   = 12
-----------
1 0 0 0 0 1   = 33

Изваждане в двоичната бройна система:
0 - 0 = 0
1 - 0 = 1
1 - 1 = 0
10 - 1 = 1

Пример за изваждане на две числа:
   10 10 10
-1 -1 -1  0   - числото, от което вадим на позиция 0 има стойност 0, затова трябва да заема от съседната позиция, заемането е равно на 10 (10 - 0 - 1) => (10 - 1 - 1) => (10 - 1 - 1)
-----------
 1  1  0  0   = 12
 -  1  1  1   =  7
-----------
    1  0  1   =  5

Умножение в двоичната бройна система:
0 * 0 = 0
0 * 1 = 0
1 * 0 = 0
1 * 1 = 1

Пример за умножение на две числа:
        1 1 0 1 0   = 26
*         1 1 0 1   = 13
-----------------
        1 1 0 1 0
      0 0 0 0 0
    1 1 0 1 0
  1 1 0 1 0
-----------------
1 0 1 0 1 0 0 1 0   = 338

Деление в двоичната бройна система:
0 / 1 = 0
1 / 1 = 1

В двоичната бройна система, също както във всички останали бройни системи, не може да се дели на 0.

````

## Как работят компютрите с цели числа

В програмирането, за обозначаване на позицията на цифрите в бинарните числа, се използва думата бит, вместо разряд.
+ Младши бит (Less Significant Bit, LSB) - се нарича най-дясната цифра в бинарното число.
+ Старши бит (Most Significant Bit, MSB) - се нарича най-лявата цифра в бинарното число.

````
Старши бит => 11111111111111111111111111110110 <= Младши бит
````

За временно съхранение на данни и инструкции, компютърният процесор използва специални клетки памет, наречени регистри. В зависимост от това дали процесорът е 32 разряден (32х) или 64 разряден (64х), в регистъра може да се съхранява число с 32 или 64 разряда (т.е. 32 или 64 бита). Прието е размерът на регистъра да се означава с буквата "N" (напр. N = 32).

> Ако процесорът е 32 разряден, то тогава размера на неговият регистър е 32 бита и може да съхрани 32 битово бинарно число.

Всеки регистър се състои от "клетки", в които може да се съхрани само една цифра - или 0 или 1.

````
Пример за съхранение на число в 32 битов регистър:

| 1 | 1 | 1 | 1 | 1 | 1 | 1 | 1 | 1 | 1 | 1 | 1 | 1 | 1 | 1 | 1 | 1 | 1 | 1 | 1 | 1 | 1 | 1 | 1 | 1 | 1 | 1 | 1 | 0 | 1 | 1 | 0 |

````

+ В програмирането целите числа се делят на:
	+ Беззнакови (Unsigned integer) - това са положителните цели числа и нула;
	+ Знакови (Signed integer) - това са положителните цели числа, отрицателните цели числа и нула;

В програмните езици, всички типове данни, които съхраняват цели числа със знак, използват старшият бит за обозначаване на знакът на числото. Със старши бит 0 се означават положителните числа, а със старши бит 1, се означават отрицателните числа. Всички останали битове се използват, за представянето на стойностите на числата.

+ Максималното положително число (със знак), което може да бъде записано в регистър с размер N е: 2^(N-1) - 1;
+ Минималното отрицателно число (със знак), което може да бъде записано в регистър с размер N е: -2^(N-1) т.е. абсолютната му стойност е с 1 по-голяма, от абсолютната стойност на максималното положително число;
+ Целите числа със знак, които могат да бъдат записани в регистър с размер N, имат граници [-2^(N-1), 2^(N-1) - 1];

````
В Java примитивният тип byte e 1 байт или 8 бита. В него се съхраняват цели числа със знак.
Старшият бит се използва за обозначаване на знакът.
Остават 7 бита за съхранение на стойности. С тези 7 бита могат да бъдат представени числата до:
   отрицателни: -2^7 = -128
   0-та
   положителни: 2^7 - 1= 127

В Java примитивният тип int e 4 байта или 32 бита. В него се съхраняват цели числа със знак.
Старшият бит се използва за обозначаване на знакът.
Остават 31 бита за съхранение на стойности. С тези 31 бита могат да бъдат представени числата до:
   отрицателни: -2^31 = -2147483648
   0-та
   положителни: 2^31 - 1= 2147483647

   0b11111111111111111111111111111111 = -1
   0b10000000000000000000000000000000 = -2147483648
   0b00000000000000000000000000000001 = 1
   0b01111111111111111111111111111111 =  2147483647

````

## Как работят компютрите с дробни числа

Позиционните бройни системи включват в себе си, представянето на дробната част на числата

````
ПРИМЕР: 8564.742

  число:  8    5    6    4   .    7     4     2
позиция:  3    2    1    0       -1    -2    -3
 основа: 10^3 10^2 10^1 10^0     10^-1 10^-2 10^-3
 
         8 * 10^3 + 5 * 10^2 + 6 * 10^1 + 4 * 10^0 + 7 * 10^(-1) + 4 * 10^(-2) + 2 * 10^(-3) = 8564.742
````

````
ПРИМЕР: 1101.101

  число:  1    1    0    1   .    1     0     1
позиция:  3    2    1    0       -1    -2    -3
 основа: 2^3  2^2  2^1  2^0      2^-1  2^-2  2^-3
 
         1 * 2^3 + 1 * 2^2 + 0 * 2^1 + 1 * 2^0 + 1 * 2^(-1) + 0 * 2^(-2) + 1 * 2^(-3) = 13.625
````

````
Преобразуване на дробната част на десетично число в бинарно число

Умножавам дробта по 2. 
Повтарям умножението по 2, като при всяко следващо умножение, взимам само дробната част от предходният резултат.
Продължавам докато се получи число без дробна част, т.е. дробната част е 0.
След това съединявам целите части на числата ОТГОРЕ НАДОЛУ.

0.625 * 2 = 1.25   (1)
 0.25 * 2 = 0.5    (0)
  0.5 * 2 = 1.0    (1)
  
0.625 = 0.101b

0.59375 * 2 = 1.1875   (1)
 0.1875 * 2 = 0.375    (0)
  0.375 * 2 = 0.75     (0)
   0.75 * 2 = 1.5      (1)
    0.5 * 2 = 1.0      (1)
	
0.59375 = 0.10011b
					
````

В двоичната бройна система, при определянето на дробната част на числото, разрядите ги умножаваме на 2^-1, 2^-2, 2^-3 и т.н. Това прави 1/2, 1/4, 1/8 и т.н. Но някои числа не могат да бъдат представени точно с база 2. Такива числа, при преобразуването им от десетични в бинарни, се превръщат в безкрайни периодични дроби. При тях се губи точност. В различните програмни езици, този проблем е решен по различен начин.

````
ПРИМЕР: 0.9

0.9 * 2 = 1.8
0.8 * 2 = 1.6
0.6 * 2 = 1.2
0.2 * 2 = 0.4
0.4 * 2 = 0.8
0.8 * 2 = 1.6
0.6 * 2 = 1.2
0.2 * 2 = 0.4
0.4 * 2 = 0.8

0.9 = 0.1(1100)b
0.9 в бинарен вид е 0.1 с безкраен период 1100

Ако преобразуваме 0.1(1100)b в десетична дроб, с определена точност, получаваме:
0.1(1100)b = 0.89999389648

````

````
Едно дробно число по-голямо от 1, може да бъде представено по следният начин:

975.75 = 975.75 * 10^0 = 97.575 * 10^1 = 9.7575 * 10^2

Ако преместим точката с N разряда НАЛЯВО, трябва да умножим с 10^N, за да получим първоначалното число.

Едно дробно число по-голямо от 0 и по-малко от 1, може да бъде представено по следният начин:

0.0025 = 0.0025 * 10^0 = 0.025 * 10^(-1) = 0.25 * 10^(-2) = 2.5 * 10^(-3)

Ако преместим точката с N разряда НАДЯСНО, трябва да умножим с 10^(-N), за да получим първоначалното число.

````

__Експоненциален запис на число__ (scientific notation) - това е запис на число в следният вид:

D.F * B ^ E

+ D (digit) - положителна или отрицателна цифра от 1 до 9 (D - винаги е само една цифра)
+ F (fraction) - дробна част
+ B (base) - основа (база) на бройната система
+ E (exponent) - степен т.е. на колко позиции е изместена точката от първоначалната позиция

Експоненциалния запис е много удобен за представянето на много големи и много малки числа. Той може да се използва с различни бройни системи.

````
ПРИМЕР:
9752 = 9.752 * 10^3
D = 9
F = 0.752
B = 10
E = 3

0.0025 = 2.5 * 10^(-3)
D = 2
F = 0.5
B = 10
E = -3

````

````
Прилагане на експоненциалният запис с двоична система:

-94.75 = -1011110.11b
-1011110.11 = -1.01111011 * 10^110
D = -1
F = 0.01111011
B = 10 - отговаря на десетичното число 2
E = 110 - отговаря на десетичното число 6

Десетичната точка се измества с 6 позиции, затова полученото число, го умножавам по база 10 на степен 110.

0.171875 = 0.001011b
0.001011 = 1.011 * 10^(-11)
D = 1
F = 0.011
B = 10 - отговаря на десетичното число 2
E = 11 - отговаря на десетичното число 3 (изместване с 3 позиции)

12.9 = 1100.1(1100)b
1100.1(1100) = 1.1001(1100) * 10^11
D = 1
F = 0.1001(1100)
B = 10 - отговаря на десетичното число 2
E = 11 - отговаря на десетичното число 3

````

## Съхранение на бинарните дробни числа в компютърната памет.

Стандартът IEEE 754 определя, как се съхраняват бинарни числа с експоненциален запис, в 32 битов регистър.

````

 |31|30|29|28|27|26|25|24|23|22|21|20|19|18|17|16|15|14|13|12|11|10| 9| 8| 7| 6| 5| 4| 3| 2| 1| 0|
 |S |           E           |                                 F                                  |
 
 Числата от 0 до 31 са индексите на бит-регистъра;
 В старшият бит (позиция 31) се съхранява знакът на числото, за положително число е 0, а за отрицателно е 1;
 В битовете от 0 до 22 (вкл.) се съхранява дробната част на числото (за дробната част на числото са отделени 23 бита);
 Цялата част на бинарното число, винаги е единица, затова тя не се указва;
 В битовете от 23 до 30 (вкл.) се съхранява степента на числото, (за степента са заделени 8 бита);
 
 Бележка: битовете от 0 до 22 се наричат мантиса;
 Бележка: битовете от 23 до 30 се наричат експонента;
 
````

Съхраняването на бинарни числа с експоненциален запис, в 64 битов регистър е аналогично, на това в 32 битов регистър. Старшият бит се използава за съхранение на знакът. 52 бита, от 0 до 51 (вкл.) - мантисата, са заделени за дробната част, а 11 бита, от 52 до 62 (вкл.) са заделени за степента - екпонентата.
